# ════════════════════════════════════════════════════════════════════════════
# FUSIONN-AIR CONFIGURATION
# ════════════════════════════════════════════════════════════════════════════
# Copy this file to config.yaml and fill in your settings.
#
# Required setup:
#   1. Create Trakt app at https://trakt.tv/oauth/applications
#   2. Get Overseerr API key from Settings > General
#   3. Get Sonarr API key from Settings > General (if using TV show cleanup)
#   4. Get Radarr API key from Settings > General (if using movie cleanup)
#   5. Copy this file: cp config.example.yaml config.yaml
#   6. Edit config.yaml with your values
#   7. Start the service

server:
  port: 8080

# ─────────────────────────────────────────────────────────────────────────────
# TRAKT (Required)
# ─────────────────────────────────────────────────────────────────────────────
# 1. Go to: https://trakt.tv/oauth/applications
# 2. Create new app with:
#    - Name: fusionn-air (or anything)
#    - Redirect URI: urn:ietf:wg:oauth:2.0:oob
# 3. Copy Client ID and Client Secret below
#
# On first run, you'll be prompted to authorize via browser.
# Tokens are saved to data/trakt_tokens.json and auto-refreshed.
trakt:
  client_id: ""      # REQUIRED - from Trakt app settings
  client_secret: ""  # REQUIRED - from Trakt app settings
  base_url: "https://api.trakt.tv"

# ─────────────────────────────────────────────────────────────────────────────
# OVERSEERR (Required for Watcher)
# ─────────────────────────────────────────────────────────────────────────────
# Get API key from: Overseerr > Settings > General
#
# user_id: Which user to make requests as
#   - 0 = Use API key owner (default)
#   - N = Specific user ID (find in Overseerr > Users > click user, ID is in URL)
#
# Note: To request as another user, you need an admin API key.
overseerr:
  base_url: "http://overseerr:5055"  # REQUIRED - adjust to your setup
  api_key: ""                         # REQUIRED - from Overseerr settings
  user_id: 0                          # Optional - request as specific user

# ─────────────────────────────────────────────────────────────────────────────
# SONARR (Required for TV show Cleanup)
# ─────────────────────────────────────────────────────────────────────────────
# Get API key from: Sonarr > Settings > General
#
# Only needed if cleanup.enabled is true and you want TV show cleanup.
sonarr:
  base_url: "http://sonarr:8989"  # Required for TV cleanup - adjust to your setup
  api_key: ""                      # Required for TV cleanup - from Sonarr settings

# ─────────────────────────────────────────────────────────────────────────────
# RADARR (Required for Movie Cleanup)
# ─────────────────────────────────────────────────────────────────────────────
# Get API key from: Radarr > Settings > General
#
# Only needed if cleanup.enabled is true and you want movie cleanup.
radarr:
  base_url: "http://radarr:7878"  # Required for movie cleanup - adjust to your setup
  api_key: ""                      # Required for movie cleanup - from Radarr settings

# ─────────────────────────────────────────────────────────────────────────────
# EMBY (Required for Emby Cleanup of MoviePilot content)
# ─────────────────────────────────────────────────────────────────────────────
# Emby is used to discover and clean up media added through MoviePilot
# (or any other source not tracked by Sonarr/Radarr).
#
# The cleanup service compares Emby's library against Sonarr/Radarr to find
# "orphan" items, then checks Trakt watch history and deletes fully watched
# content directly from Emby (which removes the files from disk).
#
# Get API key from: Emby > Dashboard > API Keys > New
emby:
  enabled: false
  base_url: "http://emby:8096"  # Emby server URL
  api_key: ""                    # Emby API key

# ─────────────────────────────────────────────────────────────────────────────
# SCHEDULER (Shared settings for both Watcher and Cleanup)
# ─────────────────────────────────────────────────────────────────────────────
# Both watcher and cleanup run on the same schedule and share these settings.
scheduler:
  # Cron expression (standard 5-field format)
  # Examples:
  #   "0 */6 * * *"  = Every 6 hours
  #   "0 0 * * *"    = Daily at midnight
  #   "0 */2 * * *"  = Every 2 hours
  cron: "0 */6 * * *"

  # Dry run mode - logs what would happen without making changes
  # RECOMMENDED: Start with true, check logs, then set to false
  dry_run: true

  # Run immediately when service starts (before waiting for cron)
  run_on_start: true

# ─────────────────────────────────────────────────────────────────────────────
# WATCHER - Auto-request new seasons via Overseerr
# ─────────────────────────────────────────────────────────────────────────────
# Monitors your Trakt calendar and requests new seasons when:
#   - Previous season is 100% watched
#   - Season isn't already requested/available in Overseerr
watcher:
  # Enable/disable the watcher feature
  enabled: true

  # How many days ahead to check for upcoming episodes
  # Trakt API max is 33 days
  calendar_days: 14

  # ── Routing (Optional) ──────────────────────────────────────────────────
  # Route requests to different Overseerr backend servers based on genre
  # or country of origin. Useful when you have separate servers for anime,
  # K-dramas, J-dramas, C-dramas, etc.
  #
  # To find your server IDs, check Overseerr Settings > Services or call:
  #   curl -H "X-Api-Key: <key>" http://overseerr:5055/api/v1/settings/sonarr
  #
  # If routing is not configured, requests use Overseerr's default server.
  routing:
    default_server_id: 0          # Server ID for regular TV shows (e.g. Sonarr)
    alternate_server_id: 1        # Server ID for matched content (e.g. MoviePilot)
    alternate_genres: []           # Genres that route to alternate server
    alternate_countries: []        # Country codes that route to alternate server
  # Example:
  # routing:
  #   default_server_id: 0
  #   alternate_server_id: 1
  #   alternate_genres: ["anime"]
  #   alternate_countries: ["jp", "kr", "cn"]

# ─────────────────────────────────────────────────────────────────────────────
# CLEANUP - Auto-remove fully watched content from Sonarr/Radarr
# ─────────────────────────────────────────────────────────────────────────────
# Removes TV shows from Sonarr and movies from Radarr (including files) when:
#   - TV shows: All episodes ON DISK have been watched on Trakt
#   - Movies: Movie has been watched on Trakt
#   - Item has been in removal queue for delay_days
#   - Title is not in exclusions list
#
# Note: Works with continuing series too - only checks episodes you have,
# not future seasons.
cleanup:
  # Enable/disable the cleanup feature
  enabled: false

  # Days to wait after fully watched before removing
  # Gives you time to rewatch or change your mind
  delay_days: 3

  # Titles to NEVER remove (case-insensitive, works for both shows and movies)
  # Useful for content you want to keep permanently
  exclusions: []
  # Example:
  # exclusions:
  #   - "Breaking Bad"
  #   - "The Office"
  #   - "Inception"
  #   - "The Dark Knight"

# ─────────────────────────────────────────────────────────────────────────────
# APPRISE - Notifications (Optional)
# ─────────────────────────────────────────────────────────────────────────────
# Send notifications via Apprise to Slack, Discord, Telegram, etc.
#
# Setup:
#   1. Run Apprise container: docker run -d -p 8000:8000 caronc/apprise
#   2. Configure your notification services in Apprise with tag "fusionn-air"
#   3. Enable and set base_url below
#
# Setup Apprise:
#   1. Access Apprise web UI (e.g., http://localhost:8000)
#   2. Create a config with key "apprise" (or your preferred key)
#   3. Add your notification URLs with tags (e.g., tag: fusionn-air)
#   4. Set the key and tag below to match
apprise:
  enabled: false
  base_url: "http://apprise:8000"  # Apprise API URL
  key: "apprise"                   # Apprise config key (from web UI)
  tag: "fusionn-air"               # Tag to filter services (default: all)

